{"version":3,"sources":["webpack://kekstagram/./src/js/api.js","webpack://kekstagram/./src/js/utils.js","webpack://kekstagram/./src/js/post.js","webpack://kekstagram/./src/js/filter.js","webpack://kekstagram/./src/js/feed.js","webpack://kekstagram/./src/js/messages.js","webpack://kekstagram/./src/js/editor-slider.js","webpack://kekstagram/./src/js/editor-upload.js","webpack://kekstagram/./src/js/editor-validation.js","webpack://kekstagram/./src/js/editor.js","webpack://kekstagram/./src/js/editor-scale.js","webpack://kekstagram/./src/js/main.js"],"names":["isEscEvent","evt","key","post","document","querySelector","btnClose","img","description","likes","commentsCount","numberCommentsShow","commentsList","btnLoader","commentTemplate","content","comments","currentCommentsNumber","totalCommentsNumber","addComments","fragment","createDocumentFragment","slice","forEach","comment","commentElement","commentData","cloneNode","avatar","src","alt","name","textContent","message","renderComment","appendChild","btnLoaderClickHandler","length","classList","add","removeEventListener","hiddenPost","body","remove","escKeydownHandler","preventDefault","addEventListener","target","contains","filter","filterBtns","querySelectorAll","photoContainer","smallPhotoTemplate","renderPhotoFeed","data","photo","filteredPhotos","dataPhoto","id","arr","sort","Math","random","a","b","filteringPhoto","imgData","photoElement","url","dataset","renderSmallPhoto","showPost","mainElement","errorAppTemplate","errorTemplate","successTemplate","renderMesssageElement","tempale","messsageElement","btnReboot","location","reload","showError","showSuccess","FilterOptions","MIN","MAX","STEP","resetSlider","FILE_TYPES","TAG_PATTERN","TagChecks","check","tags","some","tag","Set","size","test","uploadElement","inputUpload","editor","tagsField","commentsField","hideEditor","reset","focusElement","activeElement","onSuccess","onFall","FormData","fetch","method","type","then","response","ok","catch","button","cb","file","files","it","reader","FileReader","result","readAsDataURL","initFileUpload","scaleElements","btnScaleDown","btnScaleUp","inputScale","changeScalePhoto","currentScale","selectedScale","value","style","transform","parseInt","initScale","effectsElements","inputEffect","slider","sliderUpdateHandler","values","handle","parseFloat","setProperty","updateSlider","min","max","step","options","start","connect","range","noUiSlider","updateOptions","create","on","destroy","className","initSlider","errorMessage","toLowerCase","split","item","setCustomValidity","timeout","lastTimeout","window","clearTimeout","setTimeout","debounce","btn","json","Error"],"mappings":"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","file":"main.bundle.js","sourcesContent":["const URL_LOAD = 'https://22.javascript.pages.academy/kekstagram/data';\nconst URL_UPLOAD = 'https://22.javascript.pages.academy/kekstagram';\n\nconst getData = (onSuccess, onFall) => {\n  fetch(URL_LOAD)\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n      throw new Error();\n    })\n    .then((data) => onSuccess(data))\n    .catch(() => onFall());\n};\n\nconst sendData = (onSuccess, onFall, body) => {\n  fetch(URL_UPLOAD, {\n    method: 'POST',\n    type: 'multipart/form-data',\n    body,\n  })\n    .then((response) => {\n      if (response.ok) {\n        onSuccess();\n      } else {\n        onFall();\n      }\n    })\n    .catch(() => onFall());\n};\n\nexport {\n  getData,\n  sendData,\n};\n","/**\n * @param {number} num1\n * @param {number} num2\n * @return {number} Случайное целое число\n */\nconst getRandomInteger = (num1, num2 = 0) => {\n  if (num1 === num2) {\n    return num1;\n  }\n  const min = (num1 > num2) ? num2 : num1;\n  const max = (num1 > num2) ? num1 : num2;\n  const rand = min + Math.random() * (max + 1 - min);\n  return Math.floor(rand);\n};\n\n\n/**\n * @param {string} str\n * @param {number} maxLength\n * @return {boolean} Проверяет длину строки\n */\nconst checkStrLength = (str, maxLength) => {\n  return (str.length <= maxLength) ? true : false;\n};\n\n\n/**\n * @param {number} minNum\n * @param {number} maxNum\n * @return {Array} Создает массив неповторяющихся целых чисел\n */\nconst createArrayDontRepeatNum = (maxNum, minNum = 1) => {\n  const length = maxNum - minNum + 1;\n  const setNum = new Set;\n\n  while (setNum.size < length) {\n    setNum.add(getRandomInteger(minNum, maxNum));\n  }\n\n  return [...setNum];\n};\n\n\n/**\n * @param {Array} arr\n * @return {Array} Создает массив перемешеннаных значений\n */\nconst makeRandomArr = (arr) => [...arr].sort(() => Math.random() - 0.5);\n\n\n/**\n  * @param {number} max\n  * @return {Array} Создает массив последовательностью чисел\n  */\nconst createArrSequenceNum = (max) => [...(new Array(max).keys())].map(item => item + 1);\n\n\n/**\n  * @param {KeyboardEvent} evt\n  * @return {boolean} Проверяет нажата клавиша ESC или нет\n  */\nconst isEscEvent = (evt) =>\n  evt.key === 'Escape' || evt.key === 'Esc';\n\n\n/**\n  * @param {requestCallback} cb\n  * @param {number} timeout\n */\nconst debounce = (cb, timeout) => {\n  let lastTimeout;\n  return (() => {\n    if (lastTimeout) {\n      window.clearTimeout(lastTimeout);\n    }\n    lastTimeout = setTimeout(cb, timeout);\n  });\n};\n\n\nexport {\n  getRandomInteger,\n  checkStrLength,\n  createArrayDontRepeatNum,\n  makeRandomArr,\n  createArrSequenceNum,\n  isEscEvent,\n  debounce,\n};\n","import {isEscEvent} from './utils.js';\n\nconst NUMBER_COMMENTS_TO_SHOW = 5;\n\nconst post  = document.querySelector('.big-picture');\nconst btnClose  = post.querySelector('.big-picture__cancel');\nconst img  = post.querySelector('.big-picture__img img');\nconst description  = post.querySelector('.social__caption');\nconst likes  = post.querySelector('.likes-count');\nconst commentsCount  = post.querySelector('.comments-count');\nconst numberCommentsShow  = post.querySelector('.number-comments-show');\nconst commentsList  = post.querySelector('.social__comments');\nconst btnLoader  = post.querySelector('.comments-loader');\nconst commentTemplate = document.querySelector('#comment')\n  .content.querySelector('.social__comment');\n\nlet comments;\nlet currentCommentsNumber;\nlet totalCommentsNumber;\n\nconst renderComment = (commentData) => {\n  const commentElement = commentTemplate.cloneNode(true);\n  const avatar = commentElement.querySelector('.social__picture');\n  avatar.src = commentData.avatar;\n  avatar.alt = commentData.name;\n  commentElement.querySelector('.social__text')\n    .textContent = commentData.message;\n\n  return commentElement;\n};\n\nconst addComments = () => {\n  const fragment = document.createDocumentFragment();\n  comments.slice(currentCommentsNumber, totalCommentsNumber)\n    .forEach((comment) => {\n      const commentElement = renderComment(comment);\n      fragment.appendChild(commentElement);\n    });\n  commentsList.appendChild(fragment);\n};\n\nconst btnLoaderClickHandler = () => {\n  currentCommentsNumber = totalCommentsNumber;\n  totalCommentsNumber = currentCommentsNumber + NUMBER_COMMENTS_TO_SHOW;\n\n  if (totalCommentsNumber >= comments.length) {\n    btnLoader.classList.add('hidden');\n    numberCommentsShow.textContent = comments.length;\n    btnLoader.removeEventListener('click', btnLoaderClickHandler);\n  } else {\n    numberCommentsShow.textContent = totalCommentsNumber;\n  }\n\n  addComments();\n};\n\nconst renderCommentList = () => {\n  currentCommentsNumber = 0;\n  totalCommentsNumber = currentCommentsNumber + NUMBER_COMMENTS_TO_SHOW;\n  commentsCount.textContent = comments.length;\n  commentsList.textContent = '';\n\n  if (totalCommentsNumber >= comments.length) {\n    btnLoader.classList.add('hidden');\n    numberCommentsShow.textContent = comments.length;\n  } else {\n    btnLoader.classList.remove('hidden');\n    numberCommentsShow.textContent = totalCommentsNumber;\n    btnLoader.addEventListener('click', btnLoaderClickHandler);\n  }\n\n  addComments();\n};\n\nconst showPost = (imgData) => {\n  img.src = imgData.url;\n  description.textContent = imgData.description;\n  likes.textContent = imgData.likes;\n\n  comments = imgData.comments;\n  renderCommentList();\n\n  document.addEventListener('keydown', escKeydownHandler);\n\n  document.body.classList.add('modal-open');\n  post.classList.remove('hidden');\n};\n\nconst hiddenPost = () => {\n  btnLoader.removeEventListener('click', btnLoaderClickHandler);\n  post.classList.add('hidden');\n  document.body.classList.remove('modal-open');\n};\n\nconst escKeydownHandler = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    hiddenPost();\n    document.removeEventListener('keydown', escKeydownHandler);\n  }\n};\n\nbtnClose.addEventListener('click', () => {\n  hiddenPost();\n});\n\npost.addEventListener('click', (evt) => {\n  if (evt.target.classList.contains('overlay')) {\n    hiddenPost();\n  }\n});\n\nexport {\n  showPost,\n};\n","import {makeRandomArr} from './utils.js';\n\nconst MAX_RANDOM_PHOTOS = 10;\n\nconst FilterTypes = {\n  DEFAULT: 'filter-default',\n  RANDOM: 'filter-random',\n  DISCUSSED: 'filter-discussed',\n};\n\nconst filter = document.querySelector('.img-filters');\nconst filterBtns = filter.querySelectorAll('.img-filters__button');\n\nconst showFilter = (cb) => {\n  filter.classList.remove('img-filters--inactive');\n\n  filter.addEventListener('click', (evt) => {\n    if (evt.target.classList.contains('img-filters__button')\n      && !evt.target.classList.contains('img-filters__button--active')) {\n      filterBtns.forEach((btn) => {\n        btn.classList.remove('img-filters__button--active');\n        evt.target.classList.add('img-filters__button--active');\n      });\n\n      cb();\n    }\n  });\n};\n\nconst filteringPhoto = (dataPhoto) => {\n  const type = document.querySelector('.img-filters__button--active').id;\n\n  switch (type) {\n    case FilterTypes.RANDOM:\n      return makeRandomArr(dataPhoto).slice(0, MAX_RANDOM_PHOTOS);\n    case FilterTypes.DISCUSSED:\n      return dataPhoto.slice()\n        .sort((a, b) => b.comments.length - a.comments.length);\n    case FilterTypes.DEFAULT:\n    default:\n      return dataPhoto;\n  }\n};\n\nexport {\n  showFilter,\n  filteringPhoto,\n};\n","import {showPost} from './post.js';\nimport {filteringPhoto} from './filter.js';\n\nconst photoContainer = document.querySelector('.pictures');\nconst smallPhotoTemplate = document.querySelector('#picture')\n  .content.querySelector('.picture');\n\nconst renderSmallPhoto = (imgData) => {\n  const photoElement = smallPhotoTemplate.cloneNode(true);\n  photoElement.querySelector('.picture__img').src = imgData.url;\n  photoElement.querySelector('.picture__likes')\n    .textContent = imgData.likes;\n  photoElement.querySelector('.picture__comments')\n    .textContent = imgData.comments.length;\n  photoElement.dataset.id = imgData.id;\n\n  return photoElement;\n};\n\nconst clearFeed = () => {\n  const photos = photoContainer.querySelectorAll('.picture');\n  photos.forEach((photo) => photo.remove());\n};\n\nconst renderPhotoFeed = (data) => {\n  clearFeed();\n  const filteredPhotos = filteringPhoto(data);\n\n  const fragment = document.createDocumentFragment();\n  filteredPhotos.forEach((imgData) => {\n    const photoElement = renderSmallPhoto(imgData);\n    photoElement.addEventListener('click', (evt) => {\n      evt.preventDefault();\n      showPost(imgData);\n    });\n    fragment.appendChild(photoElement);\n  });\n  photoContainer.appendChild(fragment);\n};\n\nexport {\n  renderPhotoFeed,\n};\n","import {isEscEvent} from './utils.js';\n\nconst mainElement = document.querySelector('main');\nconst errorAppTemplate = document.querySelector('#error-app')\n  .content.querySelector('.error');\nconst errorTemplate = document.querySelector('#error')\n  .content.querySelector('.error');\nconst successTemplate = document.querySelector('#success')\n  .content.querySelector('.success');\n\nconst renderMesssageElement = (tempale) => {\n  const messsageElement = tempale.cloneNode(true);\n  const btnClose = messsageElement.querySelector('.button-close');\n  const btnReboot = messsageElement.querySelector('.button-reboot');\n\n  if (btnClose) {\n    const escKeydownHandler = (evt) => {\n      if (isEscEvent(evt)) {\n        evt.preventDefault();\n        messsageElement.remove();\n        document.removeEventListener('keydown', escKeydownHandler);\n      }\n    };\n\n    document.addEventListener('keydown', escKeydownHandler);\n\n    btnClose.addEventListener('click', () => {\n      messsageElement.remove();\n      document.removeEventListener('keydown', escKeydownHandler);\n    });\n\n    messsageElement.addEventListener('click', (evt) => {\n      if (evt.target === messsageElement) {\n        messsageElement.remove();\n      }\n    });\n  }\n\n  if (btnReboot) {\n    btnReboot.addEventListener('click', () => {\n      location.reload();\n    });\n  }\n\n  mainElement.appendChild(messsageElement);\n};\n\nconst showAppError = () => {\n  renderMesssageElement(errorAppTemplate);\n};\n\nconst showError = () => {\n  renderMesssageElement(errorTemplate);\n};\n\nconst showSuccess = () => {\n  renderMesssageElement(successTemplate);\n};\n\nexport {\n  showAppError,\n  showError,\n  showSuccess,\n};\n","// import '../nouislider/nouislider.js';\n\nconst FilterOptions = {\n  Chrome: {\n    MIN: 0,\n    MAX: 1,\n    STEP: 0.1,\n  },\n  Sepia: {\n    MIN: 0,\n    MAX: 1,\n    STEP: 0.1,\n  },\n  Marvin: {\n    MIN: 0,\n    MAX: 100,\n    STEP: 1,\n  },\n  Phobos: {\n    MIN: 0,\n    MAX: 3,\n    STEP: 0.1,\n  },\n  Heat: {\n    MIN: 1,\n    MAX: 3,\n    STEP: 0.1,\n  },\n};\n\nlet resetSlider;\n\nconst initSlider = (uploadElement, photo) => {\n  const effectsElements = uploadElement.querySelector('.img-upload__effects');\n  const inputEffect = uploadElement.querySelector('.effect-level__value');\n  const slider = uploadElement.querySelector('.effect-level__slider');\n\n  const sliderUpdateHandler = (values, handle) => {\n    const value = parseFloat(values[handle]);\n    inputEffect.value = value;\n    photo.style.setProperty('--filter-value', value);\n  };\n\n  const updateSlider = ({MIN: min, MAX: max, STEP: step}) => {\n    const options = {\n      start: max,\n      step: step,\n      connect: 'lower',\n      range: {\n        min: min,\n        max: max,\n      },\n    };\n\n    if (slider.noUiSlider) {\n      slider.noUiSlider.updateOptions(options);\n    } else {\n      // eslint-disable-next-line no-undef\n      noUiSlider.create(slider, options);\n      slider.noUiSlider.on('update', sliderUpdateHandler);\n    }\n  };\n\n  resetSlider = () => {\n    if (slider.noUiSlider) {\n      slider.noUiSlider.destroy();\n    }\n    photo.className = null;\n    photo.style = null;\n    inputEffect.value = null;\n  };\n\n  effectsElements.addEventListener('change', (evt) => {\n    photo.className = `effects__preview--${evt.target.value}`;\n\n    switch (evt.target.value) {\n      case 'none':\n        resetSlider();\n        break;\n      case 'chrome':\n        updateSlider(FilterOptions.Chrome);\n        break;\n      case 'sepia':\n        updateSlider(FilterOptions.Sepia);\n        break;\n      case 'marvin':\n        updateSlider(FilterOptions.Marvin);\n        break;\n      case 'phobos':\n        updateSlider(FilterOptions.Phobos);\n        break;\n      case 'heat':\n        updateSlider(FilterOptions.Heat);\n        break;\n    }\n  });\n};\n\nexport {\n  initSlider,\n  resetSlider,\n};\n","const FILE_TYPES = ['image/jpeg', 'image/png', 'image/webp', 'image/gif'];\n\nconst initFileUpload = (inputUpload, photo, cb) => {\n  inputUpload.addEventListener('change', (evt) => {\n    const file = evt.target.files[0];\n    const matches = FILE_TYPES.some((it) => file.type === it);\n\n    if (matches) {\n      const reader = new FileReader();\n      reader.addEventListener('load', () => {\n        photo.src = reader.result;\n        cb();\n      });\n\n      reader.readAsDataURL(file);\n    }\n  });\n};\n\nexport {\n  initFileUpload,\n};\n","const TAG_SYMBOL = '#';\nconst TAG_SEPARATOR = ' ';\nconst TAG_PATTERN = /^[a-z0-9#]*$/i;\nconst TAG_LENGTH = 20;\nconst MAX_NUM_TAGS = 5;\n\nconst TagChecks = {\n  hash: {\n    check(tags) {\n      return tags.some((tag) => tag[0] !== TAG_SYMBOL);\n    },\n    message: 'Хэш-тег должен начинается с символа #.',\n  },\n  empty: {\n    check(tags) {\n      return tags.some((tag) => tag.length === 1 && tag === TAG_SYMBOL);\n    },\n    message: 'Хеш-тег не может состоять только из #.',\n  },\n  quantity: {\n    check(tags) {\n      return tags.length > MAX_NUM_TAGS;\n    },\n    message: 'Нельзя указать больше 5 хэш-тегов.',\n  },\n  duplication: {\n    check(tags) {\n      return new Set(tags).size !== tags.length;\n    },\n    message: 'Один и тот же хэш-тег не может быть использован дважды.',\n  },\n  length: {\n    check(tags) {\n      return tags.some((tag) => tag.length > TAG_LENGTH);\n    },\n    message: 'Максимальная длина одного хэш-тега 20 символов, включая #.',\n  },\n  structure: {\n    check(tags) {\n      return tags.some((tag) => !TAG_PATTERN.test(tag));\n    },\n    message: 'Хеш-тег должен состоять только из буквы и чисел.',\n  },\n};\n\nconst tagsFieldInputHandler = (evt) => {\n  let errorMessage = '';\n  const tags = evt.target.value.toLowerCase().split(TAG_SEPARATOR)\n    .filter((item) => item !== '');\n\n  if (TagChecks.hash.check(tags)) {\n    errorMessage += `${TagChecks.hash.message}\\n`;\n  }\n\n  if (TagChecks.empty.check(tags)) {\n    errorMessage += `${TagChecks.empty.message}\\n`;\n  }\n\n  if (TagChecks.quantity.check(tags)) {\n    errorMessage += `${TagChecks.quantity.message}\\n`;\n  }\n\n  if (TagChecks.duplication.check(tags)) {\n    errorMessage += `${TagChecks.duplication.message}\\n`;\n  }\n\n  if (TagChecks.length.check(tags)) {\n    errorMessage += `${TagChecks.length.message}\\n`;\n  }\n\n  if (TagChecks.structure.check(tags)) {\n    errorMessage += `${TagChecks.structure.message}\\n`;\n  }\n\n  evt.target.setCustomValidity(errorMessage);\n};\n\nexport {\n  tagsFieldInputHandler,\n};\n","import {sendData} from './api.js';\nimport {initScale} from './editor-scale.js';\nimport {initSlider, resetSlider} from './editor-slider.js';\nimport {initFileUpload} from './editor-upload.js';\nimport {tagsFieldInputHandler} from './editor-validation.js';\nimport {showSuccess, showError} from './messages.js';\nimport {isEscEvent} from './utils.js';\n\nconst LEFT_MOUSE_CODE = 0;\n\nconst uploadElement = document.querySelector('.img-upload');\nconst form = uploadElement.querySelector('.img-upload__form');\nconst inputUpload = uploadElement.querySelector('.img-upload__input');\nconst editor = uploadElement.querySelector('.img-upload__overlay');\nconst photo = uploadElement.querySelector('.img-upload__preview img');\nconst btnClose = uploadElement.querySelector('.img-upload__cancel');\n\nconst tagsField = uploadElement.querySelector('.text__hashtags');\nconst commentsField = uploadElement.querySelector('.text__description');\n\nconst showEditor = () => {\n  document.addEventListener('keydown', escKeydownHandler);\n\n  editor.classList.remove('hidden');\n  document.body.classList.add('modal-open');\n};\n\nconst hideEditor = () => {\n  document.removeEventListener('keydown', escKeydownHandler);\n\n  form.reset();\n  resetSlider();\n\n  editor.classList.add('hidden');\n  document.body.classList.remove('modal-open');\n};\n\nconst escKeydownHandler = (evt) => {\n  const focusElement = document.activeElement;\n\n  if (isEscEvent(evt) &&\n      focusElement !== tagsField &&\n      focusElement !== commentsField) {\n    evt.preventDefault();\n    hideEditor();\n  }\n};\n\nbtnClose.addEventListener('click', () => {\n  hideEditor();\n});\n\nform.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n\n  sendData(showSuccess, showError, new FormData(evt.target));\n  hideEditor();\n});\n\neditor.addEventListener('mousedown', (evt) => {\n  if (evt.target === editor && evt.button === LEFT_MOUSE_CODE) {\n    hideEditor();\n  }\n});\n\ninitFileUpload(inputUpload, photo, showEditor);\ninitScale(uploadElement, photo);\ninitSlider(uploadElement, photo);\n\ntagsField.addEventListener('input', tagsFieldInputHandler);\n","const DEFAULT_SCALE = 100;\nconst MIN_SCALE = 25;\nconst STEP_SCALE = 25;\n\nconst initScale = (uploadElement, photo) => {\n  const scaleElements = uploadElement.querySelector('.img-upload__scale');\n  const btnScaleDown = scaleElements.querySelector('.scale__control--smaller');\n  const btnScaleUp = scaleElements.querySelector('.scale__control--bigger');\n  const inputScale = scaleElements.querySelector('.scale__control--value');\n\n  const changeScalePhoto = (currentScale, selectedScale) => {\n    if (currentScale !== selectedScale) {\n      inputScale.value = `${selectedScale}%`;\n      photo.style.transform = `scale(${selectedScale / 100})`;\n    }\n  };\n\n  scaleElements.addEventListener('click', (evt) => {\n    const currentScale = parseInt(inputScale.value);\n    switch (evt.target) {\n      case btnScaleDown:\n        if (currentScale > MIN_SCALE) {\n          changeScalePhoto(currentScale, (currentScale - STEP_SCALE));\n        }\n        break;\n      case btnScaleUp:\n        if (currentScale < DEFAULT_SCALE) {\n          changeScalePhoto(currentScale, (currentScale + STEP_SCALE));\n        }\n        break;\n      case inputScale:\n        changeScalePhoto(currentScale, DEFAULT_SCALE);\n        break;\n    }\n  });\n};\n\nexport {\n  initScale,\n};\n","import {getData} from './api.js';\nimport {renderPhotoFeed} from './feed.js';\nimport {showFilter} from './filter.js';\nimport {showAppError} from './messages.js';\nimport './editor.js';\nimport {debounce} from './utils.js';\n\n// TO-DO\n// убрать лишние функции из utils.js\n\nconst DEBOUNCE_INTERVAL = 500;\n\ngetData(\n  (data) => {\n    renderPhotoFeed(data);\n    showFilter(debounce(\n      () => renderPhotoFeed(data),\n      DEBOUNCE_INTERVAL,\n    ));\n  },\n  showAppError,\n);\n"],"sourceRoot":""}